<div class="container">
  <div class="farm">
    <h1><%= @farm.name %> </h1>

    <div class="row">
      <div class="col col-lg-6 ">

        <div class="highlighted-photo">

          <div>
          <%= cl_image_tag @highlighted_photo.key, height: 452, width: 530, crop: :fill  %>
          </div>

        </div>
      </div>

      <div class="col col-lg-6 ">
        <div class="other-photos">

          <div class="row">

            <div class="col col-lg-6">
              <%= cl_image_tag @second_photo&.key, height: 220, width: 270, crop: :fill, class: "second-photo"  %>
              <%= cl_image_tag @third_photo&.key, height: 220, width: 270, crop: :fill, class: "third-photo"  %>
            </div>

            <div class="col col-lg-6">

              <div class="last-photos">
                <%= cl_image_tag @fourth_photo&.key, height: 220, width: 270, crop: :fill, class: "fourth-photo"  %>
                <%= cl_image_tag @conquest_photo&.key, height: 220, width: 270, crop: :fill,class: "conquest-photo"  %>
              </div>
            </div>

          </div>

        </div>

      </div>
    </div>

    <div class="row">

      <div class="col col-lg-8">

        <div class="farm-name">
          <h2><%= @farm.name %></h2>
        </div>

        <div class="description">
          <h3>A propos</h3>
          <p><%= @farm.description %></p>
        </div>

        <div class="delivery">
          <h3>Livraison</h3>

          <div class="cards-delivery d-flex">

            <div>

              <div class="<%= !@near_farm ? 'withdrawal' : 'card-delivery' %> d-flex">

                <div>
                  <p>Zone proche</p>
                  <p class = "date"> Entre le <%= @date.strftime('%d')  %> et le <%= I18n.l((@date + 10.days), format: :long, locale: :'fr') %></p>
                </div>

                <span>CHF 5</span>

              </div>

               <div class="<%= !@farm.accepts_take_away ? 'withdrawal' : 'card-delivery' %> d-flex">

                <div>
                  <p>Retrait à la ferme</p>
                  <p class = "date"> Entre le <%= @date.strftime('%d')  %> et le <%= I18n.l((@date + 10.days), format: :long, locale: :'fr') %></p>
                </div>

                <span>Gratuit</span>

              </div>
            </div>

            <div>

              <div class="<%= @near_farm ? 'withdrawal' : 'card-delivery' %> d-flex">

                <div>
                  <p>Zone éloigné</p>
                  <p class = "date"> Entre le <%= @date.strftime('%d')  %> et le <%= I18n.l((@date + 10.days), format: :long, locale: :'fr') %></p>
                </div>

                <span>CHF 15</span>
              </div>
            </div>

          </div>

          <div class="self-service">
            <% if @farm.accepts_take_away? %>
              <h3>Self-service</h3>

              <div class="opening">
                <%@farm.opening_hours.each do |opening_hour|  %>
                  <div class="d-flex hours">
                    <p><%= Date::DAYNAMES[opening_hour.day] %></p>
                    <p><%= opening_hour.opens.to_formatted_s(:time)  %> - <%= opening_hour.closes.to_formatted_s(:time)  %></p>
                  </div>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>

      </div>

      <div class="col col-lg-4">
        <div class="user">

          <div class="card-user">

            <%= cl_image_tag @farm.user.photo.key, height: 64, width: 64, crop: :fill %>
            <p><%= @farm.user.first_name   %> </p>

            <div class="d-flex informations">
              <div class="d-flex photos">
                <% @farm.farm_categories.each do |farm_category| %>
                  <div class='category-photo'><%= cl_image_tag farm_category.category.photo.key %></div>
                <% end %>
              </div>
            </div>

            <div class="d-flex informations">
              <p><%if @farm.labels.include?("bio")%><div class='label'><%= image_tag 'labels/bio-label', class: "label" %></div><%end%></p>
            </div>

            <div class="d-flex informations">
              <p>Nombre de ventes : </p>
              <p class = "value"> 19</p>
            </div>

            <div class="d-flex informations">
              <p>Adhérents RDF depuis : </p>
              <p class = "value"><%= @farm.created_at.strftime("%Y.%m.%d")  %></p>
            </div>
          </div>
        </div>

      </div>


    </div>


  </div>


  <div class="products">
    <% @farm.categories.each do |category|  %>
      <h4><%= category.name  %></h4>

      <div class="d-flex all-card-product">
        <% category.products.in_farm(@farm).available.each do |product| %>
          <% if @fresh_available %>
            <div class="card-product">
              <%= link_to product_path(product) do  %>
                <%= cl_image_tag product.photo.key, height: 64, width: 64, crop: :fill %>
              <% end %>

              <div class="informations">

                <div class = "name">
                  <p><%= product.name  %></p>
                </div>

                <div class="price">

                  <div>
                    <div class = "unit-price">
                      <p> CHF <%= product.unit_price  %></p>
                    </div>

                    <div class = "unit">
                      <p><%= product.unit %></p>
                    </div>

                    <div class = "kg-price">
                      <p><%= product.kg_price  %> CHF/kg</p>
                    </div>

                  </div>

                  <div class = "d-flex">
                    <%= link_to "-", "#", class: "btn btn-number"%>

                    <div class="number">
                      <p>0</p>
                    </div>

                    <%= link_to "+", "#", class: "btn btn-number" %>

                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

</div>
